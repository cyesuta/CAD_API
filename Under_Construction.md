# CAD_API 開發中 - 未來功能路線圖

## 願景

將 CAD_API 從簡單的繪圖工具轉變為智能建築設計助手，從住宅建築開始。

---

## 第一階段：核心繪圖功能

### 1.2 修改命令
- [ ] **MOVE** - 移動物件
- [ ] **COPY** - 複製物件
- [ ] **ROTATE** - 旋轉物件
- [ ] **SCALE** - 縮放物件
- [ ] **TRIM** - 修剪線段
- [ ] **EXTEND** - 延伸線段
- [ ] **OFFSET** - 偏移複製

### 1.3 圖層管理
- [ ] 創建/刪除圖層
- [ ] 設定當前圖層
- [ ] 圖層可見性控制
- [ ] 圖層顏色和線型

---

## 第二階段：建築專案結構

### 2.1 專案目錄結構
```
draw/
└── projects/                         # 專案根目錄
    └── {專案名稱}/                  # 個別專案
        ├── project.json             # 專案配置文件
        ├── site_info.json           # 基地資訊
        ├── regulations.json         # 法規限制
        ├── requirements.json        # 屋主需求
        ├── floors/                  # 樓層資料
        │   ├── B1.json             # 地下一樓
        │   ├── 1F.json             # 一樓
        │   ├── 2F.json             # 二樓
        │   └── RF.json             # 屋頂層
        └── drawings/                # 圖檔輸出
            ├── floor_plans/         # 平面圖
            ├── elevations/          # 立面圖
            └── sections/            # 剖面圖
```

### 2.2 基地資訊 (site_info.json)
```json
{
  "site_boundary": {
    "coordinates": [[x1,y1], [x2,y2], ...],  // 基地邊界座標
    "area": 200,                             // 基地面積 (平方公尺)
    "orientation": "N"                       // 方位
  },
  "setbacks": {                              // 退縮距離
    "front": 4.0,
    "rear": 3.0,
    "left": 1.5,
    "right": 1.5
  },
  "context": {
    "road_width": 8.0,                       // 道路寬度
    "adjacent_buildings": []                 // 鄰房資訊
  }
}
```

### 2.3 法規限制 (regulations.json)
```json
{
  "building_coverage_ratio": 0.6,            // 建蔽率
  "floor_area_ratio": 2.4,                  // 容積率
  "max_height": 14.0,                       // 最大高度 (公尺)
  "max_floors": 4,                          // 最大樓層數
  "parking_requirements": {                  // 停車位需求
    "cars": 1,
    "motorcycles": 2
  },
  "fire_regulations": {                      // 消防法規
    "escape_routes": 2,
    "min_corridor_width": 1.2
  }
}
```

### 2.4 屋主需求 (requirements.json)
```json
{
  "family_members": 4,
  "lifestyle": ["在家工作", "經常招待客人"],
  "floor_requirements": {
    "1F": {
      "rooms": [
        {"type": "客廳", "min_area": 25},
        {"type": "廚房", "min_area": 15},
        {"type": "車庫", "cars": 1}
      ]
    },
    "2F": {
      "rooms": [
        {"type": "主臥室", "min_area": 20},
        {"type": "臥室", "count": 2, "min_area": 12},
        {"type": "衛浴", "count": 2}
      ]
    }
  },
  "special_requirements": [
    "南向採光",
    "主臥需要更衣室",
    "廚房需要中島"
  ]
}
```

---

## 第三階段：空間拓撲系統

### 3.1 房間定義
```json
{
  "room_id": "LR_1F_001",
  "type": "客廳",
  "floor": "1F",
  "boundary": {
    "coordinates": [[0,0], [5000,0], [5000,4000], [0,4000]],
    "area": 20.0,
    "perimeter": 18.0
  },
  "connections": [
    {"to": "KT_1F_001", "type": "開口", "width": 2000},
    {"to": "EN_1F_001", "type": "門", "width": 900}
  ],
  "windows": [
    {"wall": "南", "width": 3000, "height": 2100}
  ],
  "attributes": {
    "ceiling_height": 3000,
    "floor_material": "木地板",
    "natural_light": "良好"
  }
}
```

### 3.2 空間關係
- [ ] 鄰接矩陣
- [ ] 動線路徑
- [ ] 視覺連接
- [ ] 隱私等級

### 3.3 自動驗證
- [ ] 檢查建蔽率
- [ ] 檢查容積率
- [ ] 檢查退縮距離
- [ ] 檢查房間大小需求
- [ ] 檢查動線效率

---

## 第四階段：智能設計助手

### 4.1 自然語言介面
```
使用者: "在一樓配置一個25平方米的客廳，要有南向採光"
系統: 分析需求 → 找尋合適位置 → 生成房間 → 配置窗戶
```

### 4.2 設計建議
- [ ] 最佳房間配置
- [ ] 動線優化
- [ ] 自然採光分析
- [ ] 空間效率指標

### 4.3 生成式設計
- [ ] 多重配置選項
- [ ] 參數化變化
- [ ] 性能評分
- [ ] 學習使用者偏好

---

## 第五階段：進階功能

### 5.1 3D 視覺化
- [ ] 從2D平面生成3D模型
- [ ] 即時3D預覽
- [ ] VR 漫遊支援

### 5.2 環境分析
- [ ] 日照路徑研究
- [ ] 風流模擬
- [ ] 能源效率計算

### 5.3 文件生成
- [ ] 自動圖紙生成
- [ ] 規格說明文件
- [ ] 數量計算
- [ ] 建照申請表格

---

## 實施優先順序

### 立即 (v1.1)
1. 基本繪圖命令
2. 專案結構設置
3. 基地邊界定義

### 短期 (v1.2-1.5)
1. 房間創建與管理
2. 座標追蹤系統
3. 基本驗證檢查

### 中期 (v2.0)
1. 自然語言介面
2. 空間拓撲引擎
3. 設計優化

### 長期 (v3.0+)
1. AI 設計助手
2. 3D 視覺化
3. 完整 BIM 整合

---

## 技術考量

### 資料結構
- 使用 JSON 儲存配置和資料
- 實施空間索引提高效率
- 支援復原/重做操作

### 架構
- 模組化插件系統
- 事件驅動命令處理
- 關注點分離

### 整合
- 支援 IFC 格式匯入/匯出
- 第三方擴充 API
- 雲端協作功能

---

## 成功指標

1. **效率**
   - 減少 50% 設計時間
   - 自動化重複任務

2. **品質**
   - 零法規違規
   - 優化空間利用

3. **易用性**
   - 自然語言命令
   - 直觀的專案管理

---

## 徵求貢獻

歡迎在以下領域貢獻：

1. **建築專業人士**
   - 設計模式和最佳實踐
   - 法規遵循規則

2. **開發者**
   - 核心繪圖功能
   - 空間演算法
   - 使用者介面改進

3. **使用者**
   - 功能需求
   - 錯誤回報
   - 使用案例

---

*本文檔是一個動態路線圖，將根據社群反饋和開發進度更新。*

最後更新: 2025-01-26